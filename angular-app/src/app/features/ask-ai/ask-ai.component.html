<div class="ask-ai-container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <mat-icon class="header-icon">auto_awesome</mat-icon>
      <div>
        <h1>Ask AI</h1>
        <p class="subtitle">Your intelligent receipt assistant</p>
      </div>
    </div>
  </header>

  <!-- Chat Messages -->
  <div class="messages-container">
    <div class="messages">
      @for (message of messages; track message.timestamp) {
        <div class="message" [class.user-message]="message.isUser" [class.ai-message]="!message.isUser">
          <div class="message-avatar">
            <mat-icon>{{ message.isUser ? 'person' : 'smart_toy' }}</mat-icon>
          </div>
          <div class="message-content">
            <div class="message-bubble">
              {{ message.text }}
            </div>
            <span class="message-time">{{ message.timestamp | date:'shortTime' }}</span>
          </div>
        </div>
      }
      
      @if (isTyping) {
        <div class="message ai-message">
          <div class="message-avatar">
            <mat-icon>smart_toy</mat-icon>
          </div>
          <div class="message-content">
            <div class="message-bubble typing-indicator">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      }
    </div>
  </div>

  <!-- Input Area -->
  <div class="input-area">
    <div class="input-container">
      <mat-form-field appearance="outline" class="message-input">
        <mat-icon matPrefix>chat</mat-icon>
        <input 
          matInput 
          [(ngModel)]="userInput"
          (keypress)="handleKeyPress($event)"
          placeholder="Ask about your receipts..."
          autocomplete="off">
      </mat-form-field>
      <button 
        mat-fab 
        color="primary" 
        (click)="sendMessage()"
        [disabled]="!userInput.trim()"
        class="send-button">
        <mat-icon>send</mat-icon>
      </button>
    </div>
  </div>
</div>
